
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A guided introduction to Dyalog APL">
      
      
      
        <link rel="canonical" href="https://dyalog.com/Namespaces/">
      
      <link rel="icon" href="../img/favicon-32.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>Namespaces and Other Objects - APL Course</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../style/main.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#namespaces-and-other-objects" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="APL Course" class="md-header__button md-logo" aria-label="APL Course" data-md-component="logo">
      
  <img src="../img/dyalog-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            APL Course
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Namespaces and Other Objects
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="APL Course" class="md-nav__button md-logo" aria-label="APL Course" data-md-component="logo">
      
  <img src="../img/dyalog-white.svg" alt="logo">

    </a>
    APL Course
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../First-steps/" class="md-nav__link">
        First Steps
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Dfns/" class="md-nav__link">
        Dfns and Assignment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Selecting-from-lists/" class="md-nav__link">
        Selecting from Lists
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Outer-product/" class="md-nav__link">
        The Outer Product
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Shape-Reshape/" class="md-nav__link">
        Shape Reshape
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Array-model/" class="md-nav__link">
        The Array Model
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Selecting-from-arrays/" class="md-nav__link">
        Search, Sort and Select
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Loops/" class="md-nav__link">
        Loops and Recursion
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Assignment/" class="md-nav__link">
        Extra Assignment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Workspaces/" class="md-nav__link">
        Workspace Basics
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Namespaces and Other Objects
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Namespaces and Other Objects
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mutable-objects" class="md-nav__link">
    Mutable objects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dyadic-execute" class="md-nav__link">
    Dyadic execute ⍎
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-namespaces" class="md-nav__link">
    Modifying namespaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-organisation" class="md-nav__link">
    Code organisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#names-and-references" class="md-nav__link">
    Names and references
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display-form" class="md-nav__link">
    Display form
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripted-namespaces" class="md-nav__link">
    Scripted namespaces
  </a>
  
    <nav class="md-nav" aria-label="Scripted namespaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#require" class="md-nav__link">
    :Require
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-9" class="md-nav__link">
    Problem set 9
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Help/" class="md-nav__link">
        Getting Help
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Ufns/" class="md-nav__link">
        User-defined Functions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Operators/" class="md-nav__link">
        Operators
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Quad%20names/" class="md-nav__link">
        Quad Names
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Errors/" class="md-nav__link">
        Error Handling and Debugging
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Data/" class="md-nav__link">
        Data IO
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Code/" class="md-nav__link">
        Code IO
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Interfaces/" class="md-nav__link">
        External Interfaces
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Quirks/" class="md-nav__link">
        Historical Quirks
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Interpreter-internals/" class="md-nav__link">
        Interpreter Internals
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Reading/" class="md-nav__link">
        Further Reading
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mutable-objects" class="md-nav__link">
    Mutable objects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dyadic-execute" class="md-nav__link">
    Dyadic execute ⍎
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modifying-namespaces" class="md-nav__link">
    Modifying namespaces
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-organisation" class="md-nav__link">
    Code organisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#names-and-references" class="md-nav__link">
    Names and references
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display-form" class="md-nav__link">
    Display form
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scripted-namespaces" class="md-nav__link">
    Scripted namespaces
  </a>
  
    <nav class="md-nav" aria-label="Scripted namespaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#require" class="md-nav__link">
    :Require
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-9" class="md-nav__link">
    Problem set 9
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="namespaces-and-other-objects">Namespaces and other objects</h1>
<p>If you are familiar with <strong>Object Oriented Programming</strong> (<strong>OOP</strong>) concepts and have experience using them from another language, then Dyalog's classes and namespaces should hopefully feel quite straightforward to you.</p>
<p>Two documents are worth looking at, whether or not you are familiar with OOP:</p>
<ul>
<li><a href="http://docs.dyalog.com/latest/Object%20Oriented%20Programming%20for%20APL%20Programmers.pdf">Object Oriented Programming for APL Programmers</a></li>
<li><a href="http://docs.dyalog.com/latest/Object%20Oriented%20Programming%20for%20Impatient%20APL%20Programmers.pdf">A Quick Introduction to Object Oriented Programming for Impatient APL Programmers</a></li>
</ul>
<p>If nested arrays are arrays inside arrays; <strong>namespaces</strong> are a bit like a workspace within a workspace. They are <strong>objects</strong> which contain collections of names, and these names can be listed as before, but using the dot <code>.</code> syntax from <a target="_blank" href="https://cs.stackexchange.com/questions/89031/what-is-the-origin-of-dot-notation">object-oriented</a> programming.</p>
<pre><code class="language-APL">      )ns ns         ⍝ Create an empty namespace called ns
      ns.var←1 2 3   ⍝ Create a variable in ns called var
      ns.fn←{⍺,⍵}    ⍝ Create a function in ns called fn
      ⎕nl-9          ⍝ List the names of objects in the current namespace
┌──┐
│ns│
└──┘
      ns.⎕nl-⍳9      ⍝ List all names in ns
┌──┬───┐
│fn│var│
└──┴───┘
      )cs ns         ⍝ Change into ns
      ⎕this.⎕nl-⍳9   ⍝ The current namespace is ⎕THIS
┌──┬───┐
│fn│var│
└──┴───┘
      #.⎕nl-⍳9       ⍝ The root namespace is #
┌──┐
│ns│
└──┘
</code></pre>
<h3 id="mutable-objects">Mutable objects</h3>
<p>Variables are <strong>pass-by-value</strong>. This means that if one name is used to assign another name, changes to the first name are not reflected in the second name.</p>
<pre><code class="language-APL">      var1←1 2 3
      var2←var1     ⍝ The value of var1 is assigned to var2
      var1←var1+6   ⍝ The value of var2 is changed
      ⎕←var2          ⍝ var2 retains the previous value
1 2 3
</code></pre>
<p>Namespaces are objects and are <strong>pass-by-reference</strong>. All names which are assigned a reference (or <strong>pointer</strong>) can be used to refer to the original object.</p>
<pre><code class="language-APL">      )ns ns1
#.ns1
      ns1.name←'Bob'
      ns2←ns1
      ns2.name←'Steve'
      ⎕←ns1.name
Steve
</code></pre>
<p>It is possible to </p>
<div class="admonition note">
<p class="admonition-title">Discussion</p>
<ol>
<li>Should there be a difference between <code>(⎕NS⍬)(⎕NS⍬)</code> and <code>(2⍴⎕NS⍬)</code>?<ol>
<li>With "by value" semantics?</li>
<li>With "by reference" semantics?</li>
</ol>
</li>
<li>What properties should two namespaces have in order to compare equal? Which of the following scenarios would be faster?<ul>
<li>Using "by value" semantics?</li>
<li><strong>By reference:</strong> when they originate from the same call to <code>⎕NS</code>?</li>
</ul>
</li>
<li>Can you find a way to achieve "by value" semantics when using namespaces?</li>
</ol>
</div>
<details class="example">
<summary>Discussion notes</summary>
<ol>
<li>Should there be a difference between <code>(⎕NS⍬)(⎕NS⍬)</code> and <code>(2⍴⎕NS⍬)</code>?<ol>
<li>No difference in this case, there are just empty namespaces: <code>(2⍴⎕NS⍬)≡(⎕NS⍬)(⎕NS⍬)</code></li>
<li>Yes. In <code>(⎕NS⍬)(⎕NS⍬)</code> we create two entities. In <code>(2⍴⎕NS⍬)</code> we create only one.</li>
</ol>
</li>
<li>What properties should two namespaces have in order to compare equal? Which of the following scenarios would be faster?<ol>
<li><strong>By value</strong>: when the two namespace have the exact same content. This is slow as it requires recursively inspecting each namespace for its contents and doing comparisons on every member.</li>
<li><strong>By reference</strong>: When the two namespaces originate from the same call to <code>⎕NS</code>. This is fast as it requires only the comparison of two pointers.</li>
</ol>
</li>
<li><strong>Clone</strong> (or <strong>make a deep copy of</strong>) a namespace
    <pre><code class="language-APL">      ns1←⎕NS⍬
      ns1.vec←1 2 3
      ns3←⎕NS ns1
      ns3.vec[2]←10   ⍝ Only the new copy is changed
      ]disp ns1.vec ns3.vec
┌→────┬──────┐
│7 8 9│7 10 9│
└~───→┴~────→┘</code></pre></li>
</ol>
</details>
<h2 id="dyadic-execute">Dyadic execute <code>⍎</code></h2>
<p>Namespaces can be used as a simple dictionary structure.</p>
<pre><code class="language-APL">      value ← dictionary.name   ⍝ Get value
      dictionary.name ← value   ⍝ Set value
</code></pre>
<p>But how do we do this when the name can vary? Use variables to store the name.</p>
<pre><code class="language-APL">      ns←⎕NS⍬
      name←'foo'

      ns⍎name,'←1 2 3'
      10×ns.foo
</code></pre>
<pre><code>10 20 30
</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Beware:</strong> <code>⍎</code> is potentially dangerous:</p>
<p><pre><code class="language-APL">      ns←⎕NS⍬
      name←'⎕OFF⋄'   ⍝ !!!
      value←1 2 3
      ns {⍺.{⍎⍺,'←⍵'}/⍵} name value</code></pre></p>
<p>In production, <strong>validate your arguments</strong>.</p>
</div>
<h2 id="modifying-namespaces">Modifying namespaces</h2>
<p>In some applications, it is useful to keep a namespace as an object that holds the state of something.</p>
<p>It is reasonable in this case to write a tradfn that uses a namespace reference as both its argument and result. While tradfns can have the side effect of modifying a namespace, we strongly recommend that functions take arguments and return results anyway.</p>
<pre><code>      ∇ nsref ← rate Modify nsref
         nsref.var +← rate
      ∇ 
</code></pre>
<h2 id="code-organisation">Code organisation</h2>
<p>Having modular code organisation is a very sensible idea. However, it is a recent invention relative to APL. In a newer application, it is not hard to imagine a <code>utils</code> namespace, a <code>maths</code> namespace, an <code>interface</code> namespace and so on. In older applications, such compartmentalisation is often achieved using a naming convention. For example:</p>
<pre><code class="language-APL">      ⎕NL 3
displayINPUT
displaySHOW 
mathsAVG    
mathsDET    
mathsSTDEV  
utilLINES   
utilSPLIT  
</code></pre>
<p>This type of code organisation is known as a <strong>flat workspace structure</strong>.</p>
<h2 id="names-and-references">Names and references</h2>
<p>In Dyalog there are both <em>named</em> and <em>unnamed</em> namespaces. Considering our use of the word "name" to refer to a token in the workspace, beginning with a letter, that refers to an array or function or operator, this is certainly a little confusing.</p>
<p>When creating or modifying a namespace, we can assign the namespace to a name which is a namespace reference.</p>
<pre><code>      nsref ← ⎕NS⍬
      nsref.var ← 1 2 3
      ⎕←nsref
</code></pre>
<p>However, we can also use <em>dyadic</em> <code>⎕NS</code> to give the namespace a name. This name also becomes the namespace's default <a href="http://help.dyalog.com/latest/#Language/System Functions/df.htm">display form</a>. The default display form of an unnamed namespace is <code>[Namespace]</code>.</p>
<p>If we assign a reference at the same time, we now have a two ways to refer to the namespace. However, notice that the namespace's name (shown by the display form) stays the same throughout as we are referring to the same namespace object.</p>
<pre><code>      nsref ← 'nsname'⎕NS⍬   ⍝ Assigning to the reference is optional
      ⎕←nsref ⋄ ⎕←nsname
      nsref2 ← nsname
      ⎕←nsref2
</code></pre>
<h2 id="display-form">Display form</h2>
<p>The <a href="http://help.dyalog.com/latest/#Language/System Functions/df.htm"><strong>display form</strong></a> of an APL array is what is displayed when you execute an expression to display it:</p>
<pre><code class="language-APL">      x ← 1 2 3
      x     ⍝ The display form of x (depending on ]box settings)
1 2 3
      ⎕←x   ⍝ The display form of x (depending on ]box settings)
1 2 3
</code></pre>
<p>Namespaces have a default display form.
The display form can be altered with ⎕DF:</p>
<pre><code class="language-APL">      abc.⎕DF '#.abc' ⋄ abc
#.abc
      def.⎕DF 'Hello' ⋄ def
Hello
      (abc def).⎕DF ⎕NULL ⋄ abc def  ⍝ reset to default
 #.[Namespace]  #.def 
</code></pre>
<h2 id="scripted-namespaces">Scripted namespaces</h2>
<p>Store the source namespace as a single piece of text:</p>
<pre><code class="language-APL">      )ed ⍟ns  ⍝ equivalent to '⍟'⎕ED'ns'
</code></pre>
<p>or</p>
<pre><code class="language-APL">      ⎕FIX  ':Namespace ns'  'var←123'  ':EndNamespace'
      ns.var
123
      ⎕SRC ns
 :Namespace ns  var←123  :EndNamespace 
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Every time we ”fix”, the namespace is reset per the script. This means that <code>ns.var←456</code> would become <code>123</code> since the definition <code>var←123</code> is found in the script.</p>
</div>
<pre><code class="language-APL">
      ns.var←456
      ⎕SRC ns
 :Namespace ns  var←123  :EndNamespace 
      ns.var
456
      ⎕FIX ⎕SRC ns  ⍝ similar to editing and fixing
      ns.var
123

</code></pre>
<p>The table below compares some methods for a namespace in the workspace versus a namespace script with text source.</p>
<table>
<thead>
<tr>
<th>Display Form</th>
<th>Script</th>
</tr>
</thead>
<tbody>
<tr>
<td>Set:  <code>⍵.⎕DF</code></td>
<td>Set: <code>⎕FIX source</code></td>
</tr>
<tr>
<td>Get:  <code>⍕⍵</code></td>
<td>Get: <code>⎕SRC ⍵</code></td>
</tr>
<tr>
<td>Reset: <code>⍵.⎕DF ⎕NULL</code></td>
<td>Reset: <code>⎕FIX ⎕SRC ⍵</code></td>
</tr>
</tbody>
</table>
<h3 id="require">:Require</h3>
<p>It is possible to have a script depend on other scripts. To do so, use the <a href="https://help.dyalog.com/latest/index.htm#Language/Object%20Oriented%20Programming/Including%20Script%20Files.htm"><strong>:require</strong></a> keyword.</p>
<h2 id="problem-set-9">Problem set 9</h2>
<ol>
<li>Are namespaces created with <code>)NS</code> scripted or unscripted?</li>
<li>
<p>Use <code>⎕FIX</code> to create an unnamed, scripted namespace  </p>
<p>What happens if you try to edit this script using the Dyalog editor?</p>
</li>
<li>
<p>Request handler</p>
<ol>
<li>Create a namespace called <code>req</code> containing<ul>
<li>a variable <code>status</code> with the value <code>200</code></li>
<li>a method <code>Method</code> which is the function <code>{4+2×⍵}</code></li>
</ul>
</li>
<li>Within the <code>req</code> namespace, apply <code>Method</code> to <code>status</code> and store the result in <code>status</code></li>
</ol>
</li>
<li>
<p>Write a function <code>Into</code> that copies a workspace into a namespace
    <pre><code class="language-APL">      dfns←⎕NS⍬
      'dfns.dws' Into dfns
      dfns.disp dfns.morse 'SOS'
┌───┬───┬───┐
│...│---│...│
└───┴───┴───┘</code></pre></p>
<details class="hint">
<summary>Hint</summary>
<p>See the <a href="https://help.dyalog.com/latest/index.htm#Language/System%20Functions/ns.htm">documentation for <code>⎕NS</code></a>.</p>
</details>
</li>
<li>
<p>Write a function that swaps the values of two variables, the names of which are given as a 2-element nested vector of character vectors <code>⍺</code>.
    <pre><code class="language-APL">      ns←⎕NS⍬
      ns.(aa bb)←10 20
      ns your_function 'aa' 'bb'
      ns.(aa bb)
20 10</code></pre></p>
</li>
<li>
<p>Write an expression that swaps the values of the variables named <code>x</code> in the namespaces <code>ns1</code> and <code>ns2</code> .
    <pre><code class="language-APL">      ns1←⎕NS⍬ ⋄ ns2←⎕NS⍬
      ns1.x←10 ⋄ ns2.x←20
      ns1.y←30 ⋄ ns2.y←40
      your_expression
      ns1.x ns1.y ns2.x ns2.y
20 30 10 40</code></pre></p>
</li>
<li>
<p>Write a function ScalarRef that returns a scalar Boolean value indicating whether its argument is a scalar namespace.
    <pre><code class="language-APL">      ns←⎕NS⍬ ⋄ ns.a←10
      ]disp ScalarRef¨ ns.a 'abc' (ns ns) ns (⎕ns⍬) 42
0 0 0 1 1 0</code></pre></p>
<p>Use one or more of these scalar namespace properties:</p>
<ul>
<li>Name Class (⎕NC) is 9 (ref; non-scalar arrays and non-nss are 2)</li>
<li>Data Representation (⎕DR) is 326 (pointer)</li>
<li>Depth (≡) is 0 (simple scalar)</li>
<li>Allows dot syntax (ns.name)</li>
</ul>
</li>
<li>
<p>Write a function RefMask that returns an array of the same structure as its argument, but with bits indicating the namespace references.</p>
<p><pre><code class="language-APL">      ]disp RefMask (⊂⊂⊂⊂1 2 ns) 3 ns (2 2⍴'abc',⎕NS⍬)
┌─────────────┬─┬─┬───┐
│┌───────────┐│0│1│0 0│
││┌─────────┐││ │ │0 1│
│││┌───────┐│││ │ │   │
││││┌─────┐││││ │ │   │
│││││0 0 1│││││ │ │   │
││││└─────┘││││ │ │   │
│││└───────┘│││ │ │   │
││└─────────┘││ │ │   │
│└───────────┘│ │ │   │
└─────────────┴─┴─┴───┘</code></pre></p>
</li>
<li>
<p>Write a function <code>Fetch</code> which takes namespace reference as left argument and a nested vector of character vector keys as right argument and returns the corresponding values from the namespace.</p>
</li>
<li>
<p>Write a function <code>IsRoot</code>
    <pre><code class="language-APL>      IsRoot ⎕SE.Dyalog.Utils
    0
      IsRoot #
    1
      IsRoot ⎕SE
    1</code></pre></p>
</li>
<li>
<p>What is my root?
    Write a function FindRoot that takes a namespace as argument and returns its root.</p>
<p><pre><code class="language-APL>      FindRoot ⎕SE.Dyalog.Utils
⎕SE
  FindRoot #
#
  FindRoot ⎕NS⍬
#</code></pre></p>
</li>
<li>
<p>What are our roots?
    Write a function FindRoots that takes an arbitrary array of namespaces and finds the root for each namespace.</p>
<p><pre><code class="language-APL>      FindRoots ⍪⎕SE.Dyalog.Utils(#,⎕NS⍬)⎕SE
┌──────┐
│⎕SE   │
├──────┤
│ #  # │
├──────┤
│⎕SE   │
└──────┘</code></pre></p>
</li>
<li>
<p>Lineage
    Write a function <code>Line</code> that takes a single namespace and returns its lineage (as a vector of refs) from root to leaf.</p>
<p><pre><code class="language-APL>      Line ⎕SE.Dyalog.Utils
 ⎕SE  ⎕SE.Dyalog  ⎕SE.Dyalog.Utils </p>
<p>Line ⎕SE.cbbot.bandsb2.sb.io
 ⎕SE  ⎕SE.cbbot  ⎕SE.cbbot.bandsb2  ⎕SE.cbbot.bandsb2.sb  ⎕SE.cbbot.bandsb2.sb.io</code></pre></p>
</li>
<li>
<p>Where are my children?
    Write a function that lists all the children of a given namespace.</p>
<details class="hint">
<summary>Hint</summary>
<p>Note: <code>⎕NL</code> is Name List, not Children List<br />
Plan: You'll have to crawl through the entire workspace<br />
Think: How could namespaces still be out of reach?</p>
</details>
</li>
</ol>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../Workspaces/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Workspace Basics" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Workspace Basics
            </div>
          </div>
        </a>
      
      
        
        <a href="../Help/" class="md-footer__link md-footer__link--next" aria-label="Next: Getting Help" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Getting Help
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>